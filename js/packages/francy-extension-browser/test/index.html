<html>

<head>
  <meta charset="utf-8" content="text/html" property="GAP,francy,d3.v5">
  <script src="https://unpkg.com/viz.js@1.8.1/viz.js"></script>
  <script src="https://d3js.org/d3.v5.min.js"></script>
  <script src="https://unpkg.com/d3-graphviz@2.6.1/build/d3-graphviz.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js?config=TeX-AMS-MML_HTMLorMML-full,Safe"></script>
  <script src="../dist/FrancyJS.bundle.js"></script>
  <script src="../dist/D3Renderer.bundle.js"></script>
  <script src="../dist/GraphvizRenderer.bundle.js"></script>
  <title>Francy Test</title>
</head>

<body>
  <div id="francy_draw" style="visibility:hidden;"></div>
</body>

<script>
  
  var Francy = new FrancyApp({ 
    appendTo: '#francy_draw', 
    callbackHandler: (json) => {
      Logger.info(`Trigger(${JSON.stringify(JSON.stringify(json))});`);
    }
  });

  // register available renderers
  Francy.RenderingManager.register(new D3Renderer());
  Francy.RenderingManager.register(new GraphvizRenderer());

  function resolvePromise(francy) {
    francy.render().catch(error => console.log(error)).then(element => {
      // NOTE: we're using a visible div to append the object so no need to do anything here
      //document.getElementsByTagName('body')[0].appendChild(element);
      if (element) {
        document.body.appendChild(element);
        console.log('Object rendered...', element);
      }
    });
  }

  fetch('../node_modules/francy/src/__test__/data/json1.json')
    .then(response => response.json())
    .then(json => {
      resolvePromise(Francy.load(json));
    });

  fetch('../node_modules/francy/src/__test__/data/json2.json')
    .then(response => response.json())
    .then(json => {
      resolvePromise(Francy.load(json));
    });

  fetch('../node_modules/francy/src/__test__/data/json3.json')
    .then(response => response.json())
    .then(json => {
      resolvePromise(Francy.load(json));
    });

  fetch('../node_modules/francy/src/__test__/data/json4.json')
    .then(response => response.json())
    .then(json => {
      resolvePromise(Francy.load(json));
    });

  fetch('../node_modules/francy/src/__test__/data/json5.json')
    .then(response => response.json())
    .then(json => {
      resolvePromise(Francy.load(json));
    });

  fetch('../node_modules/francy/src/__test__/data/json6.json')
    .then(response => response.json())
    .then(json => {
      resolvePromise(Francy.load(json));
    });

  fetch('../node_modules/francy/src/__test__/data/json7.json')
    .then(response => response.json())
    .then(json => {
      resolvePromise(Francy.load(json));
    });
</script>

</html>
